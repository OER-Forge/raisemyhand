# RaiseMyHand Production Environment Configuration
# Copy this to .env.production and customize for your deployment

# =============================================================================
# IMPORTANT: This configuration requires PostgreSQL!
# SQLite is NOT supported for production deployments with 75+ concurrent users.
# =============================================================================

# Environment Type
ENV=production

# =============================================================================
# Database Configuration - PostgreSQL REQUIRED
# =============================================================================
# Format: postgresql://username:password@host:port/database
# The DATABASE_URL is constructed automatically from POSTGRES_* variables below
# Or you can set it explicitly here if using external PostgreSQL

# PostgreSQL Credentials
POSTGRES_USER=raisemyhand
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
POSTGRES_DB=raisemyhand

# Full DATABASE_URL (auto-constructed in docker-compose, but you can override)
# DATABASE_URL=postgresql://raisemyhand:YOUR_PASSWORD@postgres:5432/raisemyhand

# =============================================================================
# External Access Configuration
# =============================================================================
# REQUIRED: Set this to your actual domain or IP address
# This URL is used for:
#   - QR codes that students scan to join
#   - Email links
#   - Webhook callbacks
# Examples:
#   https://questions.yourschool.edu
#   https://raisemyhand.university.org
#   http://192.168.1.100:8000  (for testing on local network)
BASE_URL=https://questions.yourschool.edu

# =============================================================================
# Security Configuration - REQUIRED
# =============================================================================
# Generate strong secrets with:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"

# JWT Secret Key (32+ characters)
SECRET_KEY=GENERATE_A_32_CHAR_SECRET_HERE

# CSRF Secret (32+ characters)
CSRF_SECRET=GENERATE_A_32_CHAR_SECRET_HERE

# Admin Credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=USE_A_STRONG_PASSWORD_HERE

# =============================================================================
# Server Configuration
# =============================================================================
HOST=0.0.0.0
PORT=8000

# Timezone (IANA timezone names)
# Examples: America/New_York, America/Los_Angeles, Europe/London, Asia/Tokyo
TIMEZONE=America/New_York

# =============================================================================
# Production Settings
# =============================================================================
DEBUG=false
DEMO_MODE=false
ENABLE_AUTH=true
RATE_LIMIT_ENABLED=true

# Session timeout in minutes (default: 480 = 8 hours)
ACCESS_TOKEN_EXPIRE_MINUTES=480

# =============================================================================
# Optional: PostgreSQL Connection Pool Tuning
# =============================================================================
# These are already configured in database.py with sensible defaults:
#   - pool_size=20 (persistent connections)
#   - max_overflow=10 (additional connections during spikes)
#   - pool_recycle=3600 (recycle after 1 hour)
#
# Uncomment and adjust if you need custom settings:
# DB_POOL_SIZE=20
# DB_MAX_OVERFLOW=10
# DB_POOL_TIMEOUT=30

# =============================================================================
# Optional: PgAdmin Configuration (for database management)
# =============================================================================
# To start PgAdmin: docker compose -f docker-compose.prod.yml --profile management up
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin

# =============================================================================
# Optional: Monitoring & Logging
# =============================================================================
# Uncomment to enable external monitoring services
# SENTRY_DSN=https://your-sentry-dsn-here
# LOG_LEVEL=INFO
# ENABLE_METRICS=true

# =============================================================================
# Optional: Email Configuration (for notifications)
# =============================================================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@yourschool.edu

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
#   ✓ POSTGRES_PASSWORD is strong (16+ characters)
#   ✓ SECRET_KEY is randomly generated (32+ characters)
#   ✓ CSRF_SECRET is randomly generated (32+ characters)
#   ✓ ADMIN_PASSWORD is strong (12+ characters)
#   ✓ BASE_URL points to your actual domain (not localhost)
#   ✓ DEBUG=false
#   ✓ SSL/TLS configured via nginx reverse proxy
#   ✓ Firewall rules restrict database port 5432
#   ✓ Automated backups configured
#   ✓ This file is NOT committed to git (.gitignore)
